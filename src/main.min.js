function getRandomColor(){for(var t="0123456789ABCDEF",e="#",n=0;6>n;n++)e+=t[Math.floor(16*Math.random())];return e}function componentToHex(t){var e=t.toString(16);return 1==e.length?"0"+e:e}function rgbToHex(t,e,n){return"#"+componentToHex(t)+componentToHex(e)+componentToHex(n)}function i2xy(t,e){var n=t%e,a=Math.floor(t/e);return[n,a]}function draw(){context.beginPath();for(var t=0;t<screen.length;t++){var e=i2xy(t,canvas.width/TILE_SIZE);context.fillStyle=rgbToHex(screen[t][0],screen[t][1],screen[t][2]),context.fillRect(e[0]*TILE_SIZE,e[1]*TILE_SIZE,TILE_SIZE,TILE_SIZE)}context.stroke(),context.closePath()}function animate(){timer++,timer==maxTimer&&(timer=0,draw()),setTimeout(function(){window.requestAnimationFrame(function(){animate()})},12)}var TILE_SIZE=10,w=320,h=320,c='<canvas id="lightticker" width="'+w+'" height="'+h+'"></canvas>';document.getElementsByTagName("body")[0].innerHTML+=c;var canvas=document.getElementById("lightticker"),context=canvas.getContext("2d"),screen=null,getMapData=new XMLHttpRequest;getMapData.onreadystatechange=function(){4==this.readyState&&200==this.status&&(screen=this)},getMapData.open("GET","/src/map.json",!0),getMapData.send();var timer=0,maxTimer=50,checkData=setInterval(function(){null!=screen&&(clearInterval(checkData),screen=JSON.parse(screen.responseText),animate())},12);
